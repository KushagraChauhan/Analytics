/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * @ignore
 */
define(["ojs/ojcore","ojs/ojeventtarget"],function(t){"use strict";var e,r,n=t.GenericEvent;
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t){!function(t){t.$co="$co",t.$eq="$eq",t.$ew="$ew",t.$pr="$pr",t.$gt="$gt",t.$ge="$ge",t.$lt="$lt",t.$le="$le",t.$ne="$ne",t.$regex="$regex",t.$sw="$sw"}(t.AttributeOperator||(t.AttributeOperator={}))}(e||(e={})),t.AttributeFilterOperator=e,t.AttributeFilterOperator.AttributeOperator=e.AttributeOperator,function(t){!function(t){t.$and="$and",t.$or="$or"}(t.CompoundOperator||(t.CompoundOperator={}))}(r||(r={})),t.CompoundFilterOperator=r,t.CompoundFilterOperator.CompoundOperator=r.CompoundOperator;var l=function(t){function e(t){i(this,e);var r={};return r[e._DETAIL]=t,a(this,u(e).call(this,"mutate",r))}return c(e,n),e}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}l._DETAIL="detail",t.DataProviderMutationEvent=l,t.DataProviderMutationEvent=l;var p=function(t){function e(){return i(this,e),a(this,u(e).call(this,"refresh"))}return c(e,n),e}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),t}t.DataProviderRefreshEvent=p,t.DataProviderRefreshEvent=p,
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.DataProvider=function(){};var b=function(){function t(){i(this,t)}return h(t,[{key:"fetchByKeys",value:function(t){var e=0,r=this.getIterationLimit?this.getIterationLimit():-1,n={size:25},o=new Map,i=this.fetchFirst(n)[Symbol.asyncIterator]();return function t(n,o,i){return o.next().then(function(a){var f=a.value,u=f.data,c=f.metadata,s=c.map(function(t){return t.key}),l=!0;return n.keys.forEach(function(t){i.has(t)||s.map(function(e,r){e==t&&i.set(e,{metadata:c[r],data:u[r]})}),i.has(t)||(l=!1)}),e+=u.length,l||a.done?i:-1!=r&&e>=r?i:t(n,o,i)})}(t,i,o).then(function(e){var r=new Map;return e.forEach(function(t,e){var n=[t];r.set(e,n[0])}),{fetchParameters:t,results:r}})}},{key:"containsKeys",value:function(t){return this.fetchByKeys(t).then(function(e){var r=new Set;return t.keys.forEach(function(t){null!=e.results.get(t)&&r.add(t)}),Promise.resolve({containsParameters:t,results:r})})}},{key:"getCapability",value:function(t){if("fetchByKeys"==t)return{implementation:"iteration"};var e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;for(var r=1;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&!(e=this["_ojLastGetCapability"+r](t));r--);delete this._ojSkipLastCapability}return e}}],[{key:"applyMixin",value:function(e){var r=e.prototype.getCapability;if([t].forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(r){"constructor"!==r&&(e.prototype[r]=t.prototype[r])})}),r){for(var n=1;e.prototype["_ojLastGetCapability"+n];)++n;e.prototype["_ojLastGetCapability"+n]=r}}}]),t}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),t}t.FetchByKeysMixin=b,t.FetchByKeysMixin.applyMixin=b.applyMixin;var v=function(){function t(){i(this,t)}return h(t,[{key:"fetchByOffset",value:function(t){var e=t&&t.size>0?t.size:25,r=t?t.sortCriteria:null,n=t&&t.offset>0?t.offset:0,o=0,i=this.getIterationLimit?this.getIterationLimit():-1,a=!1,f={};f.size=e,f.sortCriteria=r;var u=new Array,c=this.fetchFirst(f)[Symbol.asyncIterator]();return function t(r,f,u){return f.next().then(function(c){a=c.done;var s=c.value,l=s.data,p=s.metadata,y=l.length;if(n<o+y)for(var h=n<=o?0:n-o;h<y&&u.length!=e;h++)u.push({metadata:p[h],data:l[h]});return o+=y,u.length<e&&!a?-1!=i&&o>=i?u:t(r,f,u):u})}(t,c,u).then(function(e){return{fetchParameters:t,results:e,done:a}})}},{key:"getCapability",value:function(t){if("fetchByOffset"==t)return{implementation:"iteration"};var e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;for(var r=1;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&!(e=this["_ojLastGetCapability"+r](t));r--);delete this._ojSkipLastCapability}return e}}],[{key:"applyMixin",value:function(e){var r=e.prototype.getCapability;if([t].forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(r){"constructor"!==r&&(e.prototype[r]=t.prototype[r])})}),r){for(var n=1;e.prototype["_ojLastGetCapability"+n];)++n;e.prototype["_ojLastGetCapability"+n]=r}}}]),t}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),t}t.FetchByOffsetMixin=v,t.FetchByOffsetMixin.applyMixin=v.applyMixin;var g=function(){function e(t){i(this,e),t=t||{},this._textFilterAttributes=t.filterOptions?t.filterOptions.textFilterAttributes:null;var r=t.filterDef;r&&(r.op?(this.op=r.op,r.value?(this.value=r.value,r.attribute&&(this.attribute=r.attribute)):r.criteria&&(this.criteria=r.criteria)):r.text&&(this.text=r.text))}return h(e,[{key:"filter",value:function(r,n,o){return t.FilterUtils.satisfy(e._transformFilter(this),r)}}],[{key:"_transformFilter",value:function(t){var r;if(t){var n,o=t.op;if(t.text?o="$regex":"$le"===o?o="$lte":"$ge"===o?o="$gte":"$pr"===o&&(o="$exists"),"$and"!=o&&"$or"!=o){n=t.text?new RegExp(t.text,"i"):t.value,r={};var i=t.attribute;if(i){var a={};"$sw"!==o&&"$ew"!==o&&"$co"!==o||(o="$regex",n=e._fixStringExpr(o,n)),a[o]=n,r[i]=a}else if(t.text){var f={};f[o]=n,t._textFilterAttributes?t._textFilterAttributes.forEach(function(t){r[t]=f}):r["*"]=f}else{var u=[];e._transformObjectExpr(n,o,null,u),r.$and=u}}else{var c=[];t.criteria.forEach(function(t){c.push(e._transformFilter(t))}),(r={})[o]=c}}return r}},{key:"_transformObjectExpr",value:function(t,r,n,o){if(Object.keys(t).length>0)Object.keys(t).forEach(function(i){var a=t[i],f=n?n+"."+i:i;if(a instanceof Object)e._transformObjectExpr(a,r,f,o);else{var u={};"$sw"!==r&&"$ew"!==r&&"$co"!==r||(r="$regex",a=e._fixStringExpr(r,a)),u[r]=a;var c={};c[f]=u,o.push(c)}});else{var i={};i[r]=t;var a={};a[n]=i,o.push(a)}}},{key:"_fixStringExpr",value:function(t,e){return("string"==typeof e||e instanceof String)&&("$sw"===t?e="^"+e:"$ew"===t&&(e+="$")),e}}]),e}(),$=function(){function t(){i(this,t)}return h(t,null,[{key:"getFilter",value:function(t){return new g(t)}}]),t}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.FilterFactory=$,t.FilterUtils=function(){function t(t,e){var r=!1;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];if(r||!n(o))throw new Error("parsing error "+e);t.operator=o,t.right=i,r=!0}}function e(t,e,r){var n;if("$lt"===t)return(r=(n=a(r,e))[0])<(e=n[1]);if("$gt"===t)return(r=(n=a(r,e))[0])>(e=n[1]);if("$lte"===t)return(r=(n=a(r,e))[0])<=(e=n[1]);if("$gte"===t)return(r=(n=a(r,e))[0])>=(e=n[1]);if("$eq"===t)return r===e;if("$ne"===t)return r!==e;if("$regex"===t){if(r){if("string"!=typeof r&&!(r instanceof String))if(r instanceof Object){if("[object Object]"==(r=r.toString()))return!1}else r=new String(r);return null!==r.match(e)}return!1}if("$exists"===t)return e?null!=r:null==r;throw new Error("not a valid expression! "+expTree)}function r(t){return"$and"===t||"$or"===t}function n(t){return"$lt"===t||"$gt"===t||"$lte"===t||"$gte"===t||"$eq"===t||"$ne"===t||"$regex"===t||"$exists"===t}function i(t){return null!=t&&(t instanceof String||"string"==typeof t)}function a(t,e){return i(t)&&null==e?e="":i(e)&&null==t&&(t=""),[t,e]}function f(t,e){for(var r=t.split("."),n=e,o=0;o<r.length;o++)n=n[r[o]];return n}return{satisfy:function(i,a){return!i||function t(o,i){var a=o.operator;if(r(a)){if(!o.left&&o.array instanceof Array){for(var u,c=o.array,s=0;s<c.length;s++){var l=t(c[s],i);if("$or"===a&&!0===l)return!0;if("$and"===a&&!1===l)return!1;u=l}return u}throw new Error("invalid expression tree!"+o)}if(n(a)){var p,y=o.right;if("*"!=o.left)return p=f(o.left,i),e(a,y,p);var h,b=Object.keys(i);for(h=0;h<b.length;h++)if(p=f(b[h],i),e(a,y,p))return!0;return!1}throw new Error("not a valid expression!"+o)}(function e(i){var a,f=[];for(var u in i)if(i.hasOwnProperty(u)){var c=i[u];if(0===u.indexOf("$")){if(r(u)){if(!(c instanceof Array))throw new Error("not a valid expression: "+i);a={operator:u,array:[]};for(var s=0;s<c.length;s++){var l=e(c[s]);a.array.push(l)}}else if(n(u))throw new Error("not a valid expression: "+i)}else if("object"!==o(c))f.push({left:u,right:c,operator:"$eq"});else{var p={left:u};t(p,c),f.push(p)}}return f.length>1?a={operator:"$and",array:f}:1===f.length&&(a=f[0]),a}(i),a)},getValue:f,assembleObject:function(t,e){var r;if(e){r={};for(var n=0;n<e.length;n++)for(var o=r,i=t,a=e[n].split("."),f=0;f<a.length;f++)i=i[a[f]],!o[a[f]]&&f<a.length-1&&(o[a[f]]={}),f===a.length-1?o[a[f]]=i:o=o[a[f]]}else r=t;return r}}}();
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/**
 * @preserve Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var m={};return m.FetchByKeysMixin=t.FetchByKeysMixin,m.FetchByOffsetMixin=t.FetchByOffsetMixin,m.FilterFactory=t.FilterFactory,m});